<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>èº«ä»½è¯æ‰¹é‡æ›´æ–°SQLç”Ÿæˆå™¨(æç®€ç‰ˆ)</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box;}
        body{padding:20px;font-family:å¾®è½¯é›…é»‘;max-width:1000px;margin:0 auto;}
        h3{text-align:center;margin-bottom:20px;color:#333;}
        .item{margin:15px 0;}
        textarea,input{width:100%;padding:10px;border:1px solid #ccc;border-radius:4px;font-size:14px;outline:none;}
        textarea{height:280px;resize:none;}
        input{height:40px;margin-top:5px;}
        button{width:100%;padding:12px;margin:10px 0;background:#009688;color:#fff;border:none;border-radius:4px;font-size:16px;cursor:pointer;}
        button:hover{background:#00796b;}
        .tips{color:#666;font-size:12px;margin-top:5px;}
    </style>
</head>
<body>
    <h3>èº«ä»½è¯æ‰¹é‡æ›´æ–° byny å­—æ®µ SQLç”Ÿæˆå™¨</h3>
    <div class="item">
        <label>1. ç²˜è´´èº«ä»½è¯å· (ä¸€è¡Œä¸€ä¸ªï¼Œä¸ç”¨å¤„ç†æ ¼å¼)</label>
        <textarea id="sfzhText" placeholder="ä¾‹å¦‚ï¼š&#10;150122200503171112&#10;152801200306293610&#10;152103200410173920"></textarea>
    </div>
    <div class="item">
        <label>2. è¾“å…¥è¦ä¿®æ”¹çš„ byny ç›®æ ‡å€¼</label>
        <input type="text" id="bynyVal" placeholder="ä¾‹å¦‚ï¼š202407 æˆ– 202507" value="202507">
        <p class="tips">æç¤ºï¼šç›´æ¥å¡«æ•°å­—å³å¯ï¼Œå¦‚202407ã€202507ï¼Œä¸ç”¨åŠ å¼•å·</p>
    </div>
    <button onclick="createSql()">âœ… ä¸€é”®ç”ŸæˆSQLè¯­å¥</button>
    <div class="item">
        <label>3. ç”Ÿæˆçš„SQLè¯­å¥ (ç›´æ¥å¤åˆ¶ä½¿ç”¨)</label>
        <textarea id="sqlResult" readonly placeholder="ç”Ÿæˆçš„SQLè¯­å¥ä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œ..."></textarea>
        <button onclick="copyText()" style="background:#ff9800;">ğŸ“‹ å¤åˆ¶SQLè¯­å¥</button>
    </div>

<script>
// å›ºå®šè¡¨åå’Œå­—æ®µï¼Œå®Œå…¨åŒ¹é…ä½ çš„éœ€æ±‚ï¼Œä¸ç”¨æ”¹
const TABLE = "certificate_meta_message";
const COL1 = "sfzh";
const COL2 = "byny";

// ç”ŸæˆSQLæ ¸å¿ƒæ–¹æ³•
function createSql(){
    let sfzhText = document.getElementById("sfzhText").value.trim();
    let bynyVal = document.getElementById("bynyVal").value.trim();
    if(!sfzhText){alert("è¯·ç²˜è´´èº«ä»½è¯å·ï¼");return;}
    if(!bynyVal){alert("è¯·å¡«å†™bynyç›®æ ‡å€¼ï¼");return;}

    // å¤„ç†èº«ä»½è¯å·ï¼šä¸€è¡Œä¸€ä¸ªã€å»ç©ºè¡Œã€å»ç©ºæ ¼ã€è‡ªåŠ¨åŠ å•å¼•å·
    let sfzhArr = sfzhText.split(/[\n\r]/).filter(val=>val.trim()!="");
    let sfzhStr = sfzhArr.map(val=>`'${val.trim()}'`).join(",\n");
    // ç”Ÿæˆä½ è¦çš„ã€åŸç‰ˆæ ¼å¼ã€‘SQLè¯­å¥
    let sql = `UPDATE ${TABLE} 
SET ${COL2} = '${bynyVal}' 
WHERE ${COL1} IN (
${sfzhStr}
);`;
    document.getElementById("sqlResult").value = sql;
    alert("ç”ŸæˆæˆåŠŸï¼");
}

// å¤åˆ¶SQL
function copyText(){
    let text = document.getElementById("sqlResult");
    text.select();
    document.execCommand("copy");
    alert("å¤åˆ¶æˆåŠŸï¼");
}
</script>
</body>
</html>