<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>傻瓜式MySQL语句生成工具</title>
    <style>
        * {margin: 20px auto;padding: 0;box-sizing: border-box;max-width: 800px;}
        .box {padding: 25px;border: 1px solid #eee;border-radius: 8px;margin-bottom: 20px;}
        h3 {color: #2c3e50;margin-bottom: 15px;}
        label {display: block;margin: 10px 0 5px;color: #34495e;font-weight: 500;}
        input, select, textarea {width: 100%;padding: 10px;border: 1px solid #ddd;border-radius: 4px;font-size: 14px;}
        button {padding: 12px 25px;background-color: #27ae60;color: #fff;border: none;border-radius: 4px;cursor: pointer;margin-right: 10px;}
        button:hover {background-color: #219a52;}
        #sqlResult {width: 100%;height: 120px;margin-top: 10px;background-color: #f8f9fa;resize: none;font-family: monospace;font-size: 14px;}
        .tip {color: #e67e22;font-size: 12px;margin-top: 3px;}
    </style>
</head>
<body>
    <h2>傻瓜式MySQL语句生成工具（通用版）</h2>
    <div class="box">
        <h3>第一步：选择操作类型</h3>
        <select id="sqlType">
            <option value="select" selected>查询（SELECT）- 查数据</option>
            <option value="insert">新增（INSERT）- 加数据</option>
            <option value="update">修改（UPDATE）- 改数据</option>
            <option value="delete">删除（DELETE）- 删数据</option>
        </select>
    </div>

    <div class="box">
        <h3>第二步：填写数据表名</h3>
        <label for="tableName">数据表名称（必填，例：user、goods）</label>
        <input type="text" id="tableName" placeholder="请输入数据表名">
    </div>

    <div class="box" id="fieldBox">
        <h3>第三步：填写字段信息</h3>
        <label for="fields">字段名称（多个字段用英文逗号分隔，例：id,name,age；查询时填*代表所有字段）</label>
        <input type="text" id="fields" placeholder="请输入字段，多字段用英文,分隔">
        <p class="tip" id="fieldTip">提示：查询可填*，新增/修改需填具体字段，与值一一对应</p>
    </div>

    <div class="box" id="valueBox" style="display: none;">
        <h3>第四步：填写字段对应值</h3>
        <label for="values">字段值（多个值用英文逗号分隔，字符串用英文单引号包裹，例：1,'张三',20）</label>
        <input type="text" id="values" placeholder="请输入字段对应值，多值用英文,分隔">
    </div>

    <div class="box" id="whereBox">
        <h3>第四步：填写查询/筛选条件（可选，精准操作必填）</h3>
        <label for="whereCond">条件（例：id=1、name='张三'、age>18，多条件用AND/OR连接）</label>
        <input type="text" id="whereCond" placeholder="无则不填，有条件直接写（不用加WHERE）">
        <p class="tip">提示：修改/删除操作建议必填条件，避免批量修改/删除全表数据</p>
    </div>

    <div class="box">
        <button onclick="generateSql()">生成MySQL语句</button>
        <button onclick="copySql()">复制SQL语句</button>
        <label for="sqlResult">生成结果（可直接复制到数据库工具）</label>
        <textarea id="sqlResult" readonly></textarea>
    </div>

    <script>
        // 切换操作类型，显示对应必填项
        const sqlType = document.getElementById('sqlType');
        const valueBox = document.getElementById('valueBox');
        const fieldBox = document.getElementById('fieldBox');
        const fieldTip = document.getElementById('fieldTip');
        
        sqlType.onchange = function() {
            const type = this.value;
            if (type === 'insert' || type === 'update') {
                valueBox.style.display = 'block';
                fieldTip.innerText = '提示：需填具体字段，字段与值必须一一对应，字符串值用英文单引号包裹';
            } else if (type === 'select') {
                valueBox.style.display = 'none';
                fieldTip.innerText = '提示：填*代表所有字段，填具体字段用英文逗号分隔';
            } else {
                valueBox.style.display = 'none';
                fieldTip.innerText = '提示：删除操作建议填具体字段辅助筛选，也可留空';
            }
        };

        // 核心：生成SQL语句
        function generateSql() {
            const type = sqlType.value;
            const table = document.getElementById('tableName').value.trim();
            const fields = document.getElementById('fields').value.trim();
            const values = document.getElementById('values').value.trim();
            const whereCond = document.getElementById('whereCond').value.trim();
            let sql = '';

            // 基础校验
            if (!table) {
                alert('请先填写数据表名称！');
                return;
            }

            // 按操作类型拼接SQL
            switch(type) {
                case 'select':
                    const selectFields = fields || '*';
                    sql = `SELECT ${selectFields} FROM ${table}`;
                    if (whereCond) sql += ` WHERE ${whereCond}`;
                    break;
                case 'insert':
                    if (!fields || !values) {
                        alert('新增操作需填写字段和对应值！');
                        return;
                    }
                    sql = `INSERT INTO ${table} (${fields}) VALUES (${values})`;
                    break;
                case 'update':
                    if (!fields || !values) {
                        alert('修改操作需填写字段和对应值！');
                        return;
                    }
                    const fieldArr = fields.split(',');
                    const valueArr = values.split(',');
                    if (fieldArr.length !== valueArr.length) {
                        alert('字段数量与值数量不一致！');
                        return;
                    }
                    let setStr = '';
                    for(let i=0; i<fieldArr.length; i++) {
                        setStr += `${fieldArr[i].trim()}=${valueArr[i].trim()},`;
                    }
                    setStr = setStr.slice(0, -1);
                    sql = `UPDATE ${table} SET ${setStr}`;
                    if (whereCond) sql += ` WHERE ${whereCond}`;
                    break;
                case 'delete':
                    sql = `DELETE FROM ${table}`;
                    if (whereCond) sql += ` WHERE ${whereCond}`;
                    break;
            }
            document.getElementById('sqlResult').value = sql;
        }

        // 复制SQL
        function copySql() {
            const result = document.getElementById('sqlResult');
            if (!result.value) {
                alert('请先生成SQL语句！');
                return;
            }
            result.select();
            document.execCommand('copy');
            alert('SQL语句已复制到剪贴板！');
        }
    </script>
</body>
</html>
